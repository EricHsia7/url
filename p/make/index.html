<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="UTF-8" />
        <title>限時加密連結產生器</title>
<textarea type="text" id="text" placeholder="輸入文字"></textarea>
                    <br><br>
                    <a href="javascript:aaa()" class="button">加密</a>
                        <br><br>



<center>
                        <h1>加密</h1>
                    <textarea type="text" id="kk" placeholder="金鑰" readonly="readonly"></textarea>
                    <br><br>
                        <a href="javascript:copy('kk','金鑰')" class="button">複製金鑰</a>
                        <br><br>
                    <input type="text" id="kkk" placeholder="密碼" readonly="readonly">
                    <br><br>
                        <a href="javascript:copy('kkk','密碼')" class="button">複製密碼</a>
                        <br><br>
                    <a href="javascript:fin()" class="button">完成</a>
                        <br><br>
                        </center>
<script src="https://cdnjs.cloudflare.com/ajax/libs/aes-js/3.1.2/index.min.js"></script>
        <script src="https://erichsia7.github.io/prompt.js/prompt.min.js"></script>
<script>
  function copy(cooid,typ) {
var copys = document.getElementById(cooid);
copys.select();
document.execCommand("Copy");
               $('body').prompt({'message':'已複製' + typ,'time':1000,'animate':'slide'});
}
  function aaa(text) {
                var ivq = parseInt(
                    Math.floor(Math.random() * 8 + 1) +
                        "" +
                        Math.floor(Math.random() * 8 + 1) +
                        "" +
                        Math.floor(Math.random() * 8 + 1) +
                        "" +
                        Math.floor(Math.random() * 8 + 1) +
                        "" +
                        Math.floor(Math.random() * 8 + 1) +
                        "" +
                        Math.floor(Math.random() * 8 + 1)
                );
                
                var key = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31];
                
                var textBytes = aesjs.utils.utf8.toBytes(text);

                var aesCtr = new aesjs.ModeOfOperation.ctr(key, new aesjs.Counter(ivq));
                var encryptedBytes = aesCtr.encrypt(textBytes);

                var encryptedHex = aesjs.utils.hex.fromBytes(encryptedBytes);
                console.log(encryptedHex);
                return [encryptedHex,ivq]
                
            }
        function make() {
                var today=new Date();
                var dk = aaa(today.getFullYear() + '-' + (today.getMonth()+1) + '-' + today.getDate()) ;
                var ed = aaa(document.getElementById('text').value) ;
                document.getElementById('kk').value = 'https://erichsia7.github.io/url/p/?key=' + ed[0] + '&d=' + dk[0] + '&dc=' + dk[1]
                document.getElementById('kkk').value = ed[1] ;
        }
</script>
